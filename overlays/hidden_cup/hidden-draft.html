<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Hidden Draft</title>
    <script src="../../js/jquery-2.0.2.min.js" type="text/javascript"
      charset="utf-8"></script>
    <script
      src='http://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js'></script>
    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <link rel="stylesheet" href="css/hidden-draft.css">

    <script type="text/javascript">
  </script>

  </head>

  <body onLoad="init()">
    <div id="nameboxtop"></div>
    <div id="nameboxbottom"></div>



    <div id="pName1"></div>
  <div id="pName1"></div> 
    <div id="pName1"></div>


    <div id="pName2"></div>

    <div id="venueHolder">

      <p id="picksText">GabrioTron's Picks</p>
      <div class="break"></div>
        <div class="venueImage" id="pick1">
          <p class="doubleText" id="doubleA">Double</p>
        </div>
        

        <div class="venueImage" id="pick2">
          <p class="doubleText" id="doubleB">Double</p>
        </div>


        <div class="venueImage" id="pick3">
          <p class="doubleText" id="doubleC">Double</p>
        </div>


        <div class="venueImage" id="pick4">
          <p class="doubleText" id="doubleD">Double</p>
        </div>
        

        <div class="venueImage" id="pick5">
          <p class="doubleText" id="doubleE">Double</p>
        </div>
        

        <div class="venueImage" id="pick6">
          <p class="doubleText" id="doubleF">Double</p>
        </div>
        

        <div class="venueImage" id="pick7">
          <p class="doubleText" id="doubleG">Double</p>
        </div>
        

        <div class="venueImage" id="pick8">
          <p class="doubleText" id="doubleH">Double</p>
      </div>


        <div class="venueImage" id="pick9">
          <p class="doubleText" id="doubleI">Double</p>
        </div>
        

        <div class="venueImage" id="pick10">
          <p class="doubleText" id="doubleJ">Double</p>
        </div>
        
    </div>

    <div id="overtimeVenueHolder">
      <div id="otHolder">
        <p class="otText" id="ovt">Overtime</p>

        <div class="venueImage" id="pick11">
          <p class="doubleText" id="doubleK">Double</p>
        </div>
        


        <div class="venueImage" id="pick12">
          <p class="doubleText" id="doubleL">Double</p>
        </div>
        


        <div class="venueImage" id="pick13">
          <p class="doubleText" id="doubleM">Double</p>
        </div>
        


        <div class="venueImage" id="pick14">
          <p class="doubleText" id="doubleN">Double</p>
        </div>
        


        <div class="venueImage" id="pick15">
          <p class="doubleText" id="doubleO">Double</p>
        </div>
      </div>

        
      <div id="showHolder">
        <p class="otText" id="fnl">Final<br />Showdown</p>

        <div class="venueImage" id="pick16"></div>
      </div>


    </div>
    <div id="gabriotron">
      <div id="gabriotronbody"></div>
      <div id="gabriotronscreen"></div>
    </div>
    <div id="timer"></div>
    <div id="roundnumber"></div>
    <script>
    var timestampOld;
    var timestamp;
    var pName1;
    var delayer = 0;
    var oldMatch = 5;
    var pvenueA1;
    var matchType;
    var xmlDoc;
    var pvenueA1 = "veranda";
    var pick1Old;
    var pick2Old;
    var pick3Old;
    var pick4Old;
    var pick5Old;
    var pick6Old;
    var pick7Old;
    var pick8Old;
    var pick9Old;
    var pick10Old;
    var pick11Old;
    var pick12Old;
    var pick13Old;
    var pick14Old;
    var pick15Old;
    var pick16Old;
    var animating = false;
    var doUpdate = false;

    $(document).ready(function () {
      bc.postMessage('hello');
    });

    function init() {



      Blank = "blank";

      $('#pName1').html('')
      $('#pName2').html('')
      anime({
        targets: '#nameboxtop',
        top: 0,
        duration: 600,
        delay: 200,
        easing: 'easeOutQuad'

      });

      anime({
        targets: '#nameboxbottom',
        top: 0,
        duration: 600,
        delay: 200,
        easing: 'easeOutQuad'

      });





      anime({
        targets: '#gabriotron',
        top: [
          { value: 200, duration: 600, delay: 1500, easing: 'easeOutQuad' },
          { value: 1500, duration: 900, delay: 7500, easing: 'easeOutQuad' }
        ]


      });


      anime({
        targets: '#venueHolder',
        left: 0,
        duration: 1000,
        delay: 9700,
        easing: 'easeOutQuad',
        complete: function () {
          delayer = 1;
        }
      });

      anime({
        targets: '#overtimeVenueHolder',
        left: 0,
        duration: 1000,
        delay: 9700,
        easing: 'easeOutQuad',
        complete: function () {
        }
      });

    }

    function getRndInteger(min, max) {
  return Math.floor(Math.random() * (max - min + 1) ) + min;
}



    const bc = new BroadcastChannel('picks');

    bc.onmessage = function (ev) {
      const received_data = ev.data;
      var { draftVars, doubleChk } = received_data;

      varSplitter = [];
      for (let i = 0; i < draftVars.length; i++) {
        varSplitter = draftVars[i].split(';;');
        window[varSplitter[0]] = varSplitter[1];

      }

      ckbxSplitter = [];
		for (let q = 0; q < doubleChk.length; q++) {
			ckbxSplitter = doubleChk[q].split(';;');
				window[ckbxSplitter[0]] = ckbxSplitter[1];

			
		}

    var randomBoy = getRndInteger(1, 5);
    
      if ($('#pName1').html() != (pName1 + " doesn't like " + ban1)) {


        anime({
          targets: '#pName1',
          opacity: 0,
          duration: 500,
          delay: 0,
          easing: 'linear',
          complete: function () {
            $('#pName1').html(pName1 + " doesn't like " + ban1);

            anime({
              targets: '#pName1',
              opacity: 1,
              duration: 500,
              delay: 500,
              easing: 'linear',
              complete: function () {

              }

            });
          }

        });

      }


      if ($('#pName2').html() != (pName2 + " doesn't like " + ban2)) {

        anime({
          targets: '#pName2',
          opacity: 0,
          duration: 500,
          delay: 0,
          easing: 'linear',
          complete: function () {
            $('#pName2').html(pName2 + " doesn't like " + ban2);

            anime({
              targets: '#pName2',
              opacity: 1,
              duration: 500,
              delay: 500,
              easing: 'linear',
              complete: function () {

              }

            });
          }

        });

      }


      if (randomBoy == 1) {
        $('#gabriotronbody').css("background-image", "url('images_draft/GT5000.png')");
        $('#gabriotronscreen').css("background-image", "url('images_draft/GT5002.gif')");
      }

      if (randomBoy == 2) {
        $('#gabriotronbody').css("background-image", "url('images_draft/GTC_Body2.png')");
        $('#gabriotronscreen').css("background-image", "url('images_draft/GTC_Screen.gif')");
      }

      if (randomBoy == 3) {
        $('#gabriotronbody').css("background-image", "url('images_draft/GE_Body.png')");
        $('#gabriotronscreen').css("background-image", "url('images_draft/GE_Screen.gif')");
      }

      if (randomBoy == 4) {
        $('#gabriotronbody').css("background-image", "url('images_draft/GTA.png')");
        $('#gabriotronscreen').css("background-image", "url('images_draft/GTA_Screen.gif')");
      }

      if (randomBoy == 5) {
        $('#gabriotronbody').css("background-image", "url('images_draft/GTA2.png')");
        $('#gabriotronscreen').css("background-image", "url('images_draft/GTA_Screen2.gif')");
      }

      if ($('#roundnumber').html() != (matchType)) {


        anime({
          targets: '#roundnumber',
          opacity: 0,
          duration: 500,
          delay: 0,
          easing: 'linear',
          complete: function () {
            $('#roundnumber').html(matchType);

            anime({
              targets: '#roundnumber',
              opacity: 1,
              duration: 500,
              delay: 500,
              easing: 'linear',
              complete: function () {

              }

            });
          }

        });

      }

      if ($('#pick1').html() != pick1 && pick1Old != pick1) {

        anime({
          targets: '#pick1',
          opacity: 0,
          duration: 500,
          delay: 0,
          easing: 'easeOutQuad',
          complete: function () {
            $('#pick1').css("background-image", "url(images_draft/" + pick1 + ".png)");
            pick1Old = pick1;

            anime({
              targets: '#pick1',
              opacity: 1,
              duration: 500,
              delay: 520,
              easing: 'easeOutQuad',
              complete: function () {
                $('#doubleA').css("opacity","1");
              },

            });
          },

        });

      }

      if ($('#pick2').html() != pick2) {

        anime({
          targets: '#pick2',
          opacity: 0,
          duration: 500,
          delay: 0,
          easing: 'easeOutQuad',
          complete: function () {
            $('#pick2').css("background-image", "url(images_draft/" + pick2 + ".png)");
            pick2Old = pick2;

            anime({
              targets: '#pick2',
              opacity: 1,
              duration: 500,
              delay: 520,
              easing: 'easeOutQuad',
              complete: function () {

              },

            });
          },

        });

      }

      if ($('#pick3').html() != pick3) {

        anime({
          targets: '#pick3',
          opacity: 0,
          duration: 500,
          delay: 0,
          easing: 'easeOutQuad',
          complete: function () {
            $('#pick3').css("background-image", "url(images_draft/" + pick3 + ".png)");
            pick3Old = pick3;

            anime({
              targets: '#pick3',
              opacity: 1,
              duration: 500,
              delay: 520,
              easing: 'easeOutQuad',
              complete: function () {

              },

            });
          },

        });

      }

      if ($('#pick4').html() != pick4) {

        anime({
          targets: '#pick4',
          opacity: 0,
          duration: 500,
          delay: 0,
          easing: 'easeOutQuad',
          complete: function () {
            $('#pick4').css("background-image", "url(images_draft/" + pick4 + ".png)");
            pick4Old = pick4;

            anime({
              targets: '#pick4',
              opacity: 1,
              duration: 500,
              delay: 520,
              easing: 'easeOutQuad',
              complete: function () {

              },

            });
          },

        });

      }

      if ($('#pick5').html() != pick5) {

        anime({
          targets: '#pick5',
          opacity: 0,
          duration: 500,
          delay: 0,
          easing: 'easeOutQuad',
          complete: function () {
            $('#pick5').css("background-image", "url(images_draft/" + pick5 + ".png)");
            pick5Old = pick5;

            anime({
              targets: '#pick5',
              opacity: 1,
              duration: 500,
              delay: 520,
              easing: 'easeOutQuad',
              complete: function () {

              },

            });
          },

        });

      }

      if ($('#pick6').html() != pick6) {

        anime({
          targets: '#pick6',
          opacity: 0,
          duration: 500,
          delay: 0,
          easing: 'easeOutQuad',
          complete: function () {
            $('#pick6').css("background-image", "url(images_draft/" + pick6 + ".png)");
            pick6Old = pick6;

            anime({
              targets: '#pick6',
              opacity: 1,
              duration: 500,
              delay: 520,
              easing: 'easeOutQuad',
              complete: function () {

              },

            });
          },

        });

      }

      if ($('#pick7').html() != pick7) {

        anime({
          targets: '#pick7',
          opacity: 0,
          duration: 500,
          delay: 0,
          easing: 'easeOutQuad',
          complete: function () {
            $('#pick7').css("background-image", "url(images_draft/" + pick7 + ".png)");
            pick7Old = pick7;

            anime({
              targets: '#pick7',
              opacity: 1,
              duration: 500,
              delay: 520,
              easing: 'easeOutQuad',
              complete: function () {

              },

            });
          },

        });

      }

      if ($('#pick8').html() != pick8) {

        anime({
          targets: '#pick8',
          opacity: 0,
          duration: 500,
          delay: 0,
          easing: 'easeOutQuad',
          complete: function () {
            $('#pick8').css("background-image", "url(images_draft/" + pick8 + ".png)");
            pick8Old = pick8;

            anime({
              targets: '#pick8',
              opacity: 1,
              duration: 500,
              delay: 520,
              easing: 'easeOutQuad',
              complete: function () {

              },

            });
          },

        });

      }

      if ($('#pick9').html() != pick9) {

        anime({
          targets: '#pick9',
          opacity: 0,
          duration: 500,
          delay: 0,
          easing: 'easeOutQuad',
          complete: function () {
            $('#pick9').css("background-image", "url(images_draft/" + pick9 + ".png)");
            pick9Old = pick9;

            anime({
              targets: '#pick9',
              opacity: 1,
              duration: 500,
              delay: 520,
              easing: 'easeOutQuad',
              complete: function () {

              },

            });
          },

        });

      }

      if ($('#pick10').html() != pick10) {

        anime({
          targets: '#pick10',
          opacity: 0,
          duration: 500,
          delay: 0,
          easing: 'easeOutQuad',
          complete: function () {
            $('#pick10').css("background-image", "url(images_draft/" + pick10 + ".png)");
            pick10Old = pick10;
            anime({
              targets: '#pick10',
              opacity: 1,
              duration: 500,
              delay: 520,
              easing: 'easeOutQuad',
              complete: function () {

              },

            });
          },

        });

      }

      if ($('#pick11').html() != pick11) {

anime({
  targets: '#pick11',
  opacity: 0,
  duration: 500,
  delay: 0,
  easing: 'easeOutQuad',
  complete: function () {
    $('#pick11').css("background-image", "url(images_draft/" + pick11 + ".png)");
    $('#pick11').html(pick11);
    anime({
      targets: '#pick11',
      opacity: 1,
      duration: 500,
      delay: 520,
      easing: 'easeOutQuad',
      complete: function () {

      },

    });
  },

});

}

if ($('#pick12').html() != pick12) {

anime({
  targets: '#pick12',
  opacity: 0,
  duration: 500,
  delay: 0,
  easing: 'easeOutQuad',
  complete: function () {
    $('#pick12').css("background-image", "url(images_draft/" + pick12 + ".png)");
    $('#pick12').html(pick12);
    anime({
      targets: '#pick12',
      opacity: 1,
      duration: 500,
      delay: 520,
      easing: 'easeOutQuad',
      complete: function () {

      },

    });
  },

});

}

if ($('#pick13').html() != pick13) {

anime({
  targets: '#pick13',
  opacity: 0,
  duration: 500,
  delay: 0,
  easing: 'easeOutQuad',
  complete: function () {
    $('#pick13').css("background-image", "url(images_draft/" + pick13 + ".png)");
    $('#pick13').html(pick13);
    anime({
      targets: '#pick13',
      opacity: 1,
      duration: 500,
      delay: 520,
      easing: 'easeOutQuad',
      complete: function () {

      },

    });
  },

});

}

if ($('#pick14').html() != pick14) {

anime({
  targets: '#pick14',
  opacity: 0,
  duration: 500,
  delay: 0,
  easing: 'easeOutQuad',
  complete: function () {
    $('#pick14').css("background-image", "url(images_draft/" + pick14 + ".png)");
    $('#pick14').html(pick14);
    anime({
      targets: '#pick14',
      opacity: 1,
      duration: 500,
      delay: 520,
      easing: 'easeOutQuad',
      complete: function () {

      },

    });
  },

});

}

if ($('#pick15').html() != pick15) {

anime({
  targets: '#pick15',
  opacity: 0,
  duration: 500,
  delay: 0,
  easing: 'easeOutQuad',
  complete: function () {
    $('#pick15').css("background-image", "url(images_draft/" + pick15 + ".png)");
    $('#pick15').html(pick15);
    anime({
      targets: '#pick15',
      opacity: 1,
      duration: 500,
      delay: 520,
      easing: 'easeOutQuad',
      complete: function () {

      },

    });
  },

});

}

if ($('#pick16').html() != pick16) {

anime({
  targets: '#pick16',
  opacity: 0,
  duration: 500,
  delay: 0,
  easing: 'easeOutQuad',
  complete: function () {
    $('#pick16').css("background-image", "url(images_draft/" + pick16 + ".png)");
    $('#pick16').html(pick16);
    anime({
      targets: '#pick16',
      opacity: 1,
      duration: 500,
      delay: 520,
      easing: 'easeOutQuad',
      complete: function () {

      },

    });
  },

});

}

if ((pick11 != '') && delayer != 1 ) {

  anime({
        targets: '#venueHolder',
        translateY: -185,
        duration: 1000,
        delay: 10700,
        easing: 'easeOutQuad',
        complete: function () {
        }
      });

      anime({
        targets: '#overtimeVenueHolder',
        translateY: 65,
        duration: 1000,
        delay: 10700,
        easing: 'easeOutQuad',
        complete: function () {
        }
      });

}

if ((pick11 != '') && delayer == 1 ) {

anime({
      targets: '#venueHolder',
      translateY: -185,
      duration: 1000,
      delay: 50,
      easing: 'easeOutQuad',
      complete: function () {
      }
    });

    anime({
      targets: '#overtimeVenueHolder',
      translateY: 65,
      duration: 1000,
      delay: 50,
      easing: 'easeOutQuad',
      complete: function () {
      }
    });

}


      
      setTimeout(() => {

        if (pick1 == "") {
          $('#pick1').css('display','none');
        } else {
          $('#pick1').css('display','block');
        }

        if (doubleA == 'true') {	
          $('#doubleA').css("visibility", "visible");
        }  else if (doubleA == 'false') {
          $('#doubleA').css("visibility", "hidden");
        }


        if (pick2 == "") {
          $('#pick2').css('display','none');
        } else {
          $('#pick2').css('display','block');
        }

        if (doubleB == 'true') {	
          $('#doubleB').css("visibility", "visible");
        }  else if (doubleB == 'false') {
          $('#doubleB').css("visibility", "hidden");
        }


        if (pick3 == "") {
          $('#pick3').css('display','none');
        } else {
          $('#pick3').css('display','block');
        }

        if (doubleC == 'true') {	
          $('#doubleC').css("visibility", "visible");
        }  else if (doubleC == 'false') {
          $('#doubleC').css("visibility", "hidden");
        }


        if (pick4 == "") {
          $('#pick4').css('display','none');
        } else {
          $('#pick4').css('display','block');
        }

        if (doubleD == 'true') {	
          $('#doubleD').css("visibility", "visible");
        }  else if (doubleD == 'false') {
          $('#doubleD').css("visibility", "hidden");
        }


        if (pick5 == "") {
          $('#pick5').css('display','none');
        } else {
          $('#pick5').css('display','block');
        }

        if (doubleE == 'true') {	
          $('#doubleE').css("visibility", "visible");
        }  else if (doubleE == 'false') {
          $('#doubleE').css("visibility", "hidden");
        }


        if (pick6 == "") {
          $('#pick6').css('display','none');
        } else {
          $('#pick6').css('display','block');
        }

        if (doubleF == 'true') {	
          $('#doubleF').css("visibility", "visible");
        }  else if (doubleF == 'false') {
          $('#doubleF').css("visibility", "hidden");
        }


        if (pick7 == "") {
          $('#pick7').css('display','none');
        } else {
          $('#pick7').css('display','block');
        }

        if (doubleG == 'true') {	
          $('#doubleG').css("visibility", "visible");
        }  else if (doubleG == 'false') {
          $('#doubleG').css("visibility", "hidden");
        }

        if (pick8 == "") {
          $('#pick8').css('display','none');
        } else {
          $('#pick8').css('display','block');
        }

        if (doubleH == 'true') {	
          $('#doubleH').css("visibility", "visible");
        }  else if (doubleH == 'false') {
          $('#doubleH').css("visibility", "hidden");
        }


        if (pick9 == "") {
          $('#pick9').css('display','none');
        } else {
          $('#pick9').css('display','block');
        }

        if (doubleI == 'true') {	
          $('#doubleI').css("visibility", "visible");
        }  else if (doubleI == 'false') {
          $('#doubleI').css("visibility", "hidden");
        }

        
        if (pick10 == "") {
          $('#pick10').css('display','none');
        } else {
          $('#pick10').css('display','block');
        }

        if (doubleJ == 'true') {	
          $('#doubleJ').css("visibility", "visible");
        }  else if (doubleJ == 'false') {
          $('#doubleJ').css("visibility", "hidden");
        }


        if (pick11 == "") {
          $('#pick11').css('display','none');
        } else {
          $('#pick11').css('display','block');
        }

        if (doubleK == 'true') {	
          $('#doubleK').css("visibility", "visible");
        }  else if (doubleK == 'false') {
          $('#doubleK').css("visibility", "hidden");
        }


        if (pick12 == "") {
          $('#pick12').css('display','none');
        } else {
          $('#pick12').css('display','block');
        }

        if (doubleL == 'true') {	
          $('#doubleL').css("visibility", "visible");
        }  else if (doubleL == 'false') {
          $('#doubleL').css("visibility", "hidden");
        }  
        

        if (pick13 == "") {
          $('#pick13').css('display','none');
        } else {
          $('#pick13').css('display','block');
        }

        if (doubleM == 'true') {	
          $('#doubleM').css("visibility", "visible");
        }  else if (doubleM == 'false') {
          $('#doubleM').css("visibility", "hidden");
        }  


        if (pick14 == "") {
          $('#pick14').css('display','none');
        } else {
          $('#pick14').css('display','block');
        }

        if (doubleM == 'true') {	
          $('#doubleN').css("visibility", "visible");
        }  else if (doubleN == 'false') {
          $('#doubleN').css("visibility", "hidden");
        } 


        if (pick15 == "") {
          $('#pick15').css('display','none');
        } else {
          $('#pick15').css('display','block');
        }

        if (doubleO == 'true') {	
          $('#doubleO').css("visibility", "visible");
        }  else if (doubleO == 'false') {
          $('#doubleO').css("visibility", "hidden");
        } 


        if (pick16 == "") {
          $('#pick16').css('display','none');
        } else {
          $('#pick16').css('display','block');
        }

        
      }, 600);

      if (oldMatch != $('#roundnumber').html()) {
        oldMatch = $('#roundnumber').html();

      }

    }









  </script>
  </body>

</html>